var connect = require('connect');

function TestServer() {
    this.server = connect();
    this.server.use(connect.static('public'));
    this.server.use(connect.directory('public'));
}

TestServer.prototype.start = function(port, next) {
    if (this.service) {
        this.service.close();
    }
    this.service = this.server.listen(port, next);
};

TestServer.prototype.stop = function() {
    if (this.service) {
        this.service.close();
        this.service = undefined;
    }
};

module.exports = TestServer;