var http = require('http');
var TestServer = require('../utility/testserver');

describe('TestServer specs', function() {
    var testServer;

    beforeEach(function(done) {
        testServer = new TestServer();
        testServer.start(1130, done);
    });

    it('should support start/stop', function(done) {
        var url = 'http://localhost:1130/test.html';
        var req = http.get(url, function(res) {
            expect(res.statusCode).toEqual(200);
            done();
        });
    });

    afterEach(function() {
        testServer.stop();
    });
});