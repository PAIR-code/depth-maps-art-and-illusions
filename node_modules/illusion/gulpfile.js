var gulp = require('gulp');
var jshint = require('gulp-jshint');
var stylish = require('jshint-stylish');
var jasmine = require('gulp-jasmine');

var srcFiles = [ 'illusion/*.js', 'phantom/*.js', 'utility/*.js', 'test/*.js' ];
var testFiles = [ 'illusion/*.js', 'utility/*.js', 'test/*.js' ];

gulp.task('jshint', function() {
    return gulp.src(srcFiles)
        .pipe(jshint())
        .pipe(jshint.reporter(stylish))
        .on('error', function(err) {
            console.error(err);
            this.emit('end');
        });
});

gulp.task('jasmine', function() {
    return gulp.src(testFiles)
        .pipe(jasmine());
});

gulp.task('watch', function() {
    gulp.watch(srcFiles, [ 'jshint', 'jasmine' ]);
});

gulp.task('test', [ 'jshint', 'jasmine' ]);

gulp.task('debug', [ 'jshint', 'jasmine', 'watch' ]);
